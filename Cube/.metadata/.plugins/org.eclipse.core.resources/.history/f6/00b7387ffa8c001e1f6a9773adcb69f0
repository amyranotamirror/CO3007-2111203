/*
 * sch_report_error.c
 *
 *  Created on: Nov 27, 2023
 *      Author: Amyra Nguyen
 */

#include "sch_report_error.h"

void SCH_Report_Task(){
	// Check for new error code
	if(SCH_ErrHandler.Error_code_G != SCH_ErrHandler.Last_error_code_G){
		SCH_ErrHandler.Last_error_code_G = SCH_ErrHandler.Error_code_G;
		SCH_ErrHandler.Error_port = 255 - SCH_ErrHandler.Error_code_G;
		if(SCH_ErrHandler.Error_code_G != 0){
			SCH_ErrHandler.Error_tick_count_G = 60000;
		} else{
			SCH_ErrHandler.Error_tick_count_G = 0;
		}
	} else if(SCH_ErrHandler.Error_tick_count_G != 0 &&
				--SCH_ErrHandler.Error_tick_count_G == 0){
		SCH_ErrHandler.Error_code_G  = 0; // RESET ERROR CODE
	}
}
