/*
 * UDF_button.c
 *
 *  Created on: Nov 13, 2023
 *      Author: Amyra Nguyen
 */


/* Import library */
#include "UDF_button.h"
/* Private variables declaration */
static int buttonSampleLimit = 1;		// Button debounce

/* Private function  */
int calculate_button_sample_limit(){
	/* Invalid range of timer */
	if(TIMER_INTERRUPT_DURATION_MS >= 50)
		return 0;

	// Interrupt duration is: > 10ms and < 50ms
	if(TIMER_INTERRUPT_DURATION_MS > BUTTON_DURATION_MIN && TIMER_INTERRUPT_DURATION_MS < BUTTON_DURATION_MAX)
		return BUTTON_DURATION_MAX / TIMER_INTERRUPT_DURATION_MS;

	// Interrupt duration is: < 10ms
	int sampleLimit = (BUTTON_DURATION_MIN / TIMER_INTERRUPT_DURATION_MS) + 1;
	while(sampleLimit * TIMER_INTERRUPT_DURATION_MS < BUTTON_DURATION_MAX)
		sampleLimit += buttonSampleRate;
	return sampleLimit / buttonSampleRate;
}
/* Public function  */
